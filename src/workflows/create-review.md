# 任务回顾工作流 Review Workflow

- 前情提要：你已经和用户创建了一个当前周期内要完成的小任务清单，任务文件存储在对应目标文件夹内的`tasks.md`文件中，包含任务描述、优先级、预期完成时间、任务状态跟踪和任务反馈计划等内容，如果没有找到，请先完成创建任务工作流`@opencoach/workflows/create-task.md`。
- 工作流目标：基于已有的任务清单，协助用户对当前周期内已创建的小任务进行复盘和评估，确保任务的完成情况得到有效跟踪，并为下一周期的任务制定提供参考，如果是用户碰到困难，针对具体的问题进行启发式讨论，在任务回顾的过程中以积极鼓励为主，不只是监督用户的任务是否得到有效执行，也要关注用户的情绪和动力，巧妙地利用你和用户之间的联结关系，让用户尽可能对你敞开心扉。
- 在过程中使用TODO工具来追踪工作流步骤的交互式执行进度情况。

## 工作流步骤 Workflow Steps

1. **回顾任务清单**：简要回顾用户的任务清单，确保对当前周期内的任务有清晰的理解。
2. **评估任务完成情况**：与用户一起评估每个任务的完成情况，确定哪些任务已完成，哪些任务未完成，并分析未完成的原因。
    - **如果规划周期内的任务均已完成**：将更新后的`task.md`进行归档，移动到目标文件目录下的`archives/<date>.md`，文件名的日期格式使用`YYYY-MM-DD.md`，并与用户讨论是否需要提前创建下一周期的任务清单，如果需要，协助用户启动创建任务工作流`@opencoach/workflows/create-task.md`。
    - **如果规划周期内仍有未完成任务**：与用户讨论是否需要调整未完成任务的优先级或预期完成时间，并根据用户的反馈更新`tasks.md`文件，确保任务清单反映最新的计划。
3. **讨论遇到的挑战**：与用户讨论在执行任务过程中遇到的挑战和困难，帮助用户识别障碍并寻找解决方案。
4. **总结经验教训**：帮助用户总结在当前周期内的经验教训，识别成功的因素和需要改进的方面。
5. **制定改进计划**：基于评估结果，协助用户制定改进计划，为下一周期的任务设定提供参考。
6. **确认评估报告**：与用户一起回顾评估报告，确保内容准确反映任务完成情况和改进计划，并获得用户的确认。
7. **添加回顾文件**：在对应目标文件夹内创建一个`reviews/<date>.md`文件，内容包括任务完成情况评估、遇到的挑战、经验教训总结和改进计划，确保回顾内容的完整性和可追溯性，文件名的日期格式使用`YYYY-MM-DD.md`。
8. **更新任务状态**：根据评估结果，更新`tasks.md`文件中的任务状态，确保任务状态反映最新的完成情况，如果在回顾过程中用户对目标和周期内任务有新的调整需求，也应及时更新，并主动和用户协商改动的内容，在用户确认后再进行修改。
9. **计划下一次回顾时间**：与用户讨论并确定下一次任务回顾的时间点，确保用户在未来的周期内持续跟踪任务完成情况。

## 输出文件规范 Output File Specifications

### 回顾文件 Review File (`reviews/<date>.md`)

文件结构必须包含以下各部分内容：

1. 任务完成情况评估（Task Completion Evaluation）：详细描述每个任务的完成情况，分析未完成任务的原因。
2. 遇到的挑战（Challenges Encountered）：总结在执行任务过程中遇到的主要挑战和困难。
3. 经验教训总结（Lessons Learned）：识别成功的因素和需要改进的方面。
4. 改进计划（Improvement Plan）：基于评估结果，制定改进计划，为下一周期的任务设定提供参考。
5. 文件名的日期格式使用`YYYY-MM-DD.md`。

### 任务文件 Tasks File (`tasks.md`)

在回顾过程中，根据评估结果，更新`tasks.md`文件中的任务状态，确保任务状态反映最新的完成情况。如果在回顾过程中用户对目标和周期内任务有新的调整需求，也应及时更新，并主动和用户协商改动的内容，在用户确认后再进行修改。

一些明确需要修改的内容包括但不限于：

1. 任务优先级（Task Priorities）：根据评估结果，调整任务的优先级。
2. 预期完成时间（Expected Completion Dates）：根据评估结果，调整任务的预期完成时间。
3. 任务状态跟踪（Task Status Tracking）：更新任务的状态（如待办、进行中、已完成）。
4. 任务反馈计划（Task Feedback Plan）：根据用户的反馈，调整任务跟踪和反馈的频率和方式。
5. 下次评估时间（Next Review Date）：根据用户的计划，调整下次对任务进行评估和调整的时间点。
6. 文件内的时间格式均采用`YYYY-MM-DD`格式。

### 归档任务文件 Archived Tasks File (`archives/<date>.md`)

如果经过回顾，或者回顾前发现规划周期内的任务均已完成，则将更新后的`task.md`进行归档，移动到目标文件目录下的`archives/<date>.md`，文件名的日期格式使用`YYYY-MM-DD.md`，并询问用户是否需要提前创建下一周期的任务清单，如果需要，协助用户启动创建任务工作流`@opencoach/workflows/create-task.md`。

## 工作流结果确认 Workflow Completion Confirmation

在工作流结束时，确认是否正确创建目标文件夹内的回顾文件`reviews/<date>.md`，并确保文件内容符合上述规范。与用户确认回顾报告的完整性和准确性，以及更新`tasks.md`中任务状态，确保任务状态反映最新的完成情况。如果`tasks.md`内的任务均已完成，确认归档的任务文件`archives/<date>.md`是否正确创建，并询问用户是否需要提前创建下一周期的任务清单。
